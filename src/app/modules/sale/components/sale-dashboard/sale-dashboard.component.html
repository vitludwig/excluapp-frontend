<ng-container *ngIf="$selectedUser()">
	<div class="flex gap-3 flex-wrap">
		<p-card *ngFor="let item of $sortiment()"
			(click)="addOneToCart(item)"
			[header]="item.name"
			[class.active]="$cartCount()[item.id]"
			class="card"
		>
			<div class="card-controls w-full flex justify-content-between align-items-center"
				*ngIf="$cartCount()[item.id]">
				<p-button type="button"
					icon="pi pi-minus"
					class="p-button-rounded"
					styleClass="p-button-lg"
					(click)="removeOneToCart(item, $event)"></p-button>

				<span>{{ $cartCount()[item.id] }}</span>

				<p-button type="button"
					icon="pi pi-plus"
					class="p-button-rounded"
					styleClass="p-button-lg"
					(click)="addOneToCart(item, $event)"></p-button>
			</div>
		</p-card>

		<p-card (click)="showBeerpongDialog()"
			[header]="'Beerpong'"
			[class.active]="$cartCount()['beerpong']"
			class="card"
		/>
	</div>

	<div class="slide-panel">
		<div class="w-full flex align-items-end justify-content-between">
			<p-button icon="pi pi-times"
				styleClass="p-button-rounded p-button-raised p-button-lg p-button-danger"
				class="order-control-btn"
				(click)="clearOrder()"
			/>

			<p-button icon="pi pi-fw pi-{{$showSummary() ? 'chevron-down' : 'chevron-up'}}"
				class="slide-open-btn"
				styleClass="p-button-raised p-button-lg p-button-info"
				(click)="toggleSummary()">
			</p-button>

			<p-button icon="pi pi-check"
				styleClass="p-button-rounded p-button-raised p-button-lg p-button-success"
				class="order-control-btn"
				(click)="confirmOrder()"
			/>
		</div>
		<div class="summary"
			[class.visible]="$showSummary()">
			<div class="summary-item"
				*ngFor="let item of $summary() | async"
			>
				<span>{{item.sortiment?.name ?? 'Pivečko nebo kyseláček'}}</span>
				<div class="flex align-items-center">
					<span>{{item.count}}</span>
					<p-button icon="pi pi-pencil"
						class="ml-4"
						styleClass="p-button-raised p-button-info p-button-sm"
						(click)="showSummaryDetail(item)"
					/>
				</div>
			</div>
		</div>
	</div>


</ng-container>

<ng-container *ngIf="!$selectedUser()">
	<app-select-user [users]="usersService.$users()"
		layout="list"
		[multiple]="false"
		(select)="selectUser($event.existingUser![0])"
	/>
</ng-container>
